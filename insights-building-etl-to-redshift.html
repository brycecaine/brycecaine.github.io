
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="index, follow" />

  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro:300,400,400i,700" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://www.brycecaine.com/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="https://www.brycecaine.com/theme/pygments/github.min.css">
  <link rel="stylesheet" type="text/css" href="https://www.brycecaine.com/theme/font-awesome/css/font-awesome.min.css">


    <link href="https://www.brycecaine.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Bryce Caine's Blog Atom">


    <link rel="shortcut icon" href="https://www.brycecaine.com/images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="https://www.brycecaine.com/images/favicon.ico" type="image/x-icon">

<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55396444-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

<meta name="author" content="Bryce Caine" />
<meta name="description" content="I&#39;ve spent many hours at work lately developing a process to load data into our new AWS Redshift instance. I&#39;m looking forward to when this ETL process will be ready for production. The plan is to: Provide a simple way to add ETL jobs, whether they be overwrites or appends …" />
<meta name="keywords" content="redshift, python, etl">

<meta property="og:site_name" content="Bryce Caine's Blog"/>
<meta property="og:title" content="Insights Building ETL to Redshift"/>
<meta property="og:description" content="I&#39;ve spent many hours at work lately developing a process to load data into our new AWS Redshift instance. I&#39;m looking forward to when this ETL process will be ready for production. The plan is to: Provide a simple way to add ETL jobs, whether they be overwrites or appends …"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://www.brycecaine.com/insights-building-etl-to-redshift"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2017-01-21 00:00:00-07:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://www.brycecaine.com/author/bryce-caine.html">
<meta property="article:section" content="misc"/>
<meta property="article:tag" content="redshift"/>
<meta property="article:tag" content="python"/>
<meta property="article:tag" content="etl"/>
<meta property="og:image" content="https://www.brycecaine.com/images/brycecaine.jpg">

  <title>Bryce Caine's Blog &ndash; Insights Building ETL to Redshift</title>

<!-- Google Tag Manager -->
<script>
  (function(w,d,s,l,i){
    w[l]=w[l]||[];
    w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
    var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
    j.async=true;
    j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
    f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5X725WK');
</script>
<!-- End Google Tag Manager --></head>
<body>
<!-- Google Tag Manager -->
<noscript>
  <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5X725WK" height="0" width="0" style="display:none;visibility:hidden"></iframe>
</noscript>
<!-- End Google Tag Manager -->  <aside>
    <div>
      <a href="https://www.brycecaine.com">
        <img src="https://www.brycecaine.com/images/brycecaine.jpg" alt="Bryce Caine" title="Bryce Caine">
      </a>
      <h1><a href="https://www.brycecaine.com">Bryce Caine</a></h1>

<p>Dad, Data, Developer</p>
      <nav>
        <ul class="list">
          <li><a href="https://www.brycecaine.com/pages/about#about">About</a></li>
          <li><a href="https://www.brycecaine.com/pages/portfolio#portfolio">Portfolio</a></li>

        </ul>
      </nav>

      <ul class="social">
        <li><a class="sc-github" href="https://github.com/brycecaine" target="_blank"><i class="fa fa-github"></i></a></li>
        <li><a class="sc-linkedin" href="https://linkedin.com/brycecaine" target="_blank"><i class="fa fa-linkedin"></i></a></li>
        <li><a class="sc-twitter" href="https://twitter.com/brycecaine" target="_blank"><i class="fa fa-twitter"></i></a></li>
        <li><a class="sc-google" href="https://plus.google.com/117024465923249915159" target="_blank"><i class="fa fa-google"></i></a></li>
        <li><a class="sc-envelope" href="mailto:brycecaine@gmail.com" target="_blank"><i class="fa fa-envelope"></i></a></li>
      </ul>
    </div>


  </aside>
  <main>

    <nav>
      <a href="https://www.brycecaine.com">    Home
</a>

      <a href="https://www.brycecaine.com/categories">Categories</a>
      <a href="https://www.brycecaine.com/tags">Tags</a>
      <a href="https://www.brycecaine.com/archives">Archive</a>

      <a href="https://www.brycecaine.com/feeds/all.atom.xml">    Atom
</a>

    </nav>

<article class="single">
  <header>
      
    <h1 id="insights-building-etl-to-redshift">Insights Building ETL to Redshift</h1>
    <p>
          Posted on Sat 21 January 2017 in <a href="https://www.brycecaine.com/category/misc.html">misc</a>


    </p>
  </header>


  <div>
    <p>I've spent many hours at work lately developing a process to load data into our new AWS Redshift instance. I'm looking forward to when this ETL process will be ready for production. The plan is to:</p>
<ul>
<li>Provide a simple way to add ETL jobs, whether they be overwrites or appends</li>
<li>Allow for initial and ongoing loads</li>
<li>Adhere to best practices in loading data into Redshift</li>
</ul>
<h3>ETL Jobs</h3>
<p>The idea behind adding an ETL job will be to add all of the needed SQL statements as independent files, and then a corresponding python dictionary in the ETL script. (Eventually, I'm hoping to replace these dictionaries with database tables and hook a Django app into it.) An ETL job can be designated as an overwrite or an append. For now, overwrites will consist of deleting pertinent data and then appending updated data (similar to <a href="http://docs.aws.amazon.com/redshift/latest/dg/t_updating-inserting-using-staging-tables-.html#merge-method-replace-existing-rows">this approach</a> in the AWS documentation). Rather than creating staging tables, though, S3 is utilized to stage the data as CSVs.<sup><a href="#footnote1">1</a></sup></p>
<h3>Initial and Ongoing</h3>
<p>Adding a new ETL job consists of developing SQL scripts related to both the initial load as well as ongoing loads. The initial job includes creating the destination table, given the proper create statement, and skips creating it if it already exists. Ongoing jobs will consist of daily, weekly, semi-monthly, etc.</p>
<p>To ensure performance, I am planning on making deep copies of tables that are updated daily or less frequently. Eventually, when I have tables that are updated more frequently, I will utilize the <code>vacuum</code> command.</p>
<p>As I continue developing this solution, I will post more on the progress.</p>
<hr>
<p><a name="footnote1">1</a>: When I was at AWS re:Invent last November, I took occasion to ask an AWS engineer how he would handle periodically updating data in Redshift. He asked how many rows I was talking about, and I responded several thousand. He recommended using S3 to stage CSVs and then the <code>copy</code> command to load the data into tables. As I've compared loading data via insert statements versus the <code>copy</code> command, I can verify the fact that "the COPY command is many times faster and more efficient than INSERT commands" (<a href="http://docs.aws.amazon.com/redshift/latest/dg/tutorial-loading-data.html">AWS Redshift Tutorial</a>).</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://www.brycecaine.com/tag/redshift.html">redshift</a>
      <a href="https://www.brycecaine.com/tag/python.html">python</a>
      <a href="https://www.brycecaine.com/tag/etl.html">etl</a>
    </p>
  </div>

  <div class="center social-share">
    <p>    Like this article? Share it with your friends!
</p>
    <div class="addthis_native_toolbox"></div>
    <div class="addthis_sharing_toolbox"></div>
    <div class="addthis_inline_share_toolbox"></div>
  </div>


    <div class="addthis_relatedposts_inline"></div>


<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'brycecaine';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
        Please enable JavaScript to view comments.

</noscript>
<!-- End Disqus -->
</article>

    <footer>
<p>&copy;  2018</p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p>    </footer>
  </main>


    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5b594f00d814fcaa" async="async"></script>


<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Bryce Caine's Blog ",
  "url" : "https://www.brycecaine.com",
  "image": "https://www.brycecaine.com/images/brycecaine.jpg",
  "description": "Blog"
}
</script>

</body>
</html>